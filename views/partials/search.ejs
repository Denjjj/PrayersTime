<div class="search-container">
  <div class="nm-container column justify-center align-center">
    <h2 class="search-heading txt-center"><%= desc %></h2>

    <div class="column fluid-width manual-container">
      <input class="manual-location-btn fluid-width <% if(lang == 'en')
      {%>row-reverse <%}else{%>row <%}%>search-box justify-between align-center"
      <% if(lang == 'en') {%> style="text-align: left" <%}%> placeholder="<%
      if(lang == 'en') { %>Search a City Name<% }else {%>ابحث عن اسم مدينة<%}%>"
      >
      <i
        class="fas fa-map-marker-alt detect-location"
        <% if(lang == 'en') {%> style="right: 10px;" <%}%> 
        title="تحديد موقعي - Detect My Location"
      ></i>
      <div class="autoComleteSearch"></div>
    </div>
  </div>
</div>
<script>
  let detectLocation = document.querySelector(".detect-location");

  detectLocation.addEventListener("click", () => {
    if (lang == "en") {
      navigator.geolocation.getCurrentPosition(
            // (B2) ON SUCCESSFULLY GETTING GPS COORDINATES
            function (pos) {
              let longitude = pos.coords.longitude,
                latitude = pos.coords.latitude;

              location.href = `${location.origin}/detect?lati=${latitude}&long=${longitude}&lang=en`;
            },

            // (B3) ON FAILING TO GET GPS COORDINATES
            function (err) {
              console.log(err);
            },

            // (B4) GPS OPTIONS
            {
              enableHighAccuracy: true,
              timeout: 5000,
              maximumAge: 0,
            }
          );
  }else{
    navigator.geolocation.getCurrentPosition(
            // (B2) ON SUCCESSFULLY GETTING GPS COORDINATES
            function (pos) {
              let longitude = pos.coords.longitude,
                latitude = pos.coords.latitude;

              location.href = `${location.origin}/detect?lati=${latitude}&long=${longitude}`;
            },

            // (B3) ON FAILING TO GET GPS COORDINATES
            function (err) {
              console.log(err);
            },

            // (B4) GPS OPTIONS
            {
              enableHighAccuracy: true,
              timeout: 5000,
              maximumAge: 0,
            }
          );
  }
  });
</script>
